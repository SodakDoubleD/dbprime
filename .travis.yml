language: python
python: "3.6"
services: postgresql
before_script:
  - psql -c 'CREATE DATABASE test_db;' -U postgres
  - psql -c 'CREATE TABLE IF NOT EXISTS test_db (test_tableid SERIAL PRIMARY KEY, var_field VARCHAR, var_field2 VARCHAR, num_val INT);' -U postgres
  - psql -c 'CREATE USER test with PASSWORD ''test'';' -U postgres
  - psql -c 'GRANT ALL PRIVILEGES ON DATABASE test_db TO test;' -U postgres
  - psql -c 'GRANT ALL PRIVILEGES ON TABLE test_table TO test;' -U postgres
  - psql -c 'GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO test;' -U postgres
install:
  - pip install psycopg2
script: python -m unittest test_dbprime.py
